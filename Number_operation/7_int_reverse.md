# 7. 整数翻转

## 用例

```python
case = [
  [123,321],
  [-123,-321],
  [120,21],
  [0,0],
  [-2147483648,0],
  [2147483647,0]
]

```



## 思路

这道题需要解决两个问题，一个是如何翻转一个整数，另一个是在翻转的过程中，如何不超题目中的32位的限制

1. 翻转整数，可以采用取模和取整除的方法，n = x%10拿到最后一位，放入新整数中y=y*10+n，然后再把x/10，将最后一位去掉后一直循环，知道x==0
2. 在循环的翻转整数时，需要不断的判断，新产生的y是否已经超限，如果没有题目中32位的限制，则直接判断-2^31 < y < 2^31-1即可，但是如果要求不能超过32位，那么需要提前判断: 即判断当前的y，是否小于(2^31-1)/10,如果大于，且新加的n>7则移除，因为7是2^31-1的最后一位(2^31-1 = 2147483647),同理，也需要判断当前的y是否小于-2^31(-2147483648)/10,如果小于，且n<-8则溢出

```python
def reverse(x):
    y = 0
    right = 2**31 - 1
    flag = 1 if x > 0 else -1
    x = abs(x)
    while x:
        n = x % 10
        if y > right/10:
            return 0
        if y == right/10 and n > right%10:
            return 0

        y = y*10 + n
        x /= 10

    return flag * y

for i in case:
    print "case is {0},result is {1}".format(i[0],reverse(i[0]))

```



## 总结

这道题的注意点，主要有两点：

1. 如何翻转一个整数，一个trick的方法，就是先转换成字符串，然后再倒叙输出，转换回int，这样写起来代码会很简单：

   flag * int(str(x)[1::-1]),但是这样会超出题目的条件限制，即32位溢出的问题

   所以，这里的翻转，利用了数学思路：%取最后一位，/用来将最后一位删除

2. 需要注意如何判断溢出，这里采用了”先验“的思路，即每次计算新的y值之前，先判断它是不是还有足够的”空间“，即最大值/10之后，和当前的y值做对比，这样是可以”提前“知道，y值是否会溢出的

   1. 为了简便运算，可以将x值取绝对值，这样省去了判断左边界负数的情况，在python中，负数的除法比较麻烦，比如-123//10会得到-13，而不是-12，因为python的除法是floor除法，也叫地板除，总会往小的方向靠近，**需要+1才可以得到想要的结果**；负数取余也很奇怪，比如-123%10会得到7而不是-3，-1%10=9而不是-1，**需要将取余的结果减去10**，才得到想要的负数余数

